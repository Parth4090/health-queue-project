<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0.0">
    <title>Image Quality Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .test-section { margin: 20px 0; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .image-comparison { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin: 20px 0; }
        .image-container { text-align: center; }
        .image-container img { max-width: 100%; height: auto; border: 2px solid #ddd; border-radius: 4px; }
        .image-container h3 { margin: 10px 0; color: #333; }
        .image-container p { color: #666; font-size: 12px; }
        .quality-info { background: #e8f4fd; padding: 15px; border-radius: 4px; margin: 20px 0; }
        .button { display: inline-block; margin: 10px; padding: 10px 20px; background: #007bff; color: white; text-decoration: none; border-radius: 4px; }
        .button:hover { background: #0056b3; }
        .button.download { background: #28a745; }
        .button.download:hover { background: #1e7e34; }
        .button.direct { background: #6f42c1; }
        .button.direct:hover { background: #5a32a3; }
    </style>
</head>
<body>
    <h1>üîç Image Quality Test</h1>
    <p>Testing different image serving methods for verification ID: <strong>68b033affc44860bc34675ae</strong></p>
    
    <div class="quality-info">
        <h3>üìã Test Information:</h3>
        <ul>
            <li><strong>Document ID:</strong> 68b03502fd5874f0f105cb39</li>
            <li><strong>File Size:</strong> 450,342 bytes</li>
            <li><strong>File Type:</strong> PNG Image</li>
            <li><strong>Purpose:</strong> Compare image quality across different serving methods</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üñºÔ∏è Image Quality Comparison</h2>
        <p>Compare the quality of the same image served through different routes:</p>
        
        <div class="image-comparison">
            <div class="image-container">
                <h3>Standard Route</h3>
                <img src="http://localhost:5000/api/doctor-verification/documents/68b033affc44860bc34675ae/68b03502fd5874f0f105cb39" 
                     alt="Standard Quality" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <p style="display:none; color:red;">‚ùå Failed to load</p>
                <p>Standard API route with buffer reading</p>
                <a href="http://localhost:5000/api/doctor-verification/documents/68b033affc44860bc34675ae/68b03502fd5874f0f105cb39" 
                   target="_blank" class="button">View Full Size</a>
            </div>
            
            <div class="image-container">
                <h3>High Quality Route</h3>
                <img src="http://localhost:5000/api/doctor-verification/documents/68b033affc44860bc34675ae/68b03502fd5874f0f105cb39/hq" 
                     alt="High Quality" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <p style="display:none; color:red;">‚ùå Failed to load</p>
                <p>High-quality route with optimized headers</p>
                <a href="http://localhost:5000/api/doctor-verification/documents/68b033affc44860bc34675ae/68b03502fd5874f0f105cb39/hq" 
                   target="_blank" class="button">View Full Size</a>
            </div>
            
            <div class="image-container">
                <h3>Original Quality Route</h3>
                <img src="http://localhost:5000/api/doctor-verification/documents/68b033affc44860bc34675ae/68b03502fd5874f0f105cb39/original" 
                     alt="Original Quality" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <p style="display:none; color:red;">‚ùå Failed to load</p>
                <p>Original quality route with streaming</p>
                <a href="http://localhost:5000/api/doctor-verification/documents/68b033affc44860bc34675ae/68b03502fd5874f0f105cb39/original" 
                   target="_blank" class="button">View Full Size</a>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>üìÅ Direct File Access</h2>
        <p>Access the image directly from the uploads folder:</p>
        <a href="http://localhost:5000/uploads/doctor-verification/governmentId-1756378370156-589381697.png" 
           target="_blank" class="button direct">View Direct from Uploads</a>
        <a href="http://localhost:5000/uploads/doctor-verification/medicalDegree-1756378370168-950062320.png" 
           target="_blank" class="button direct">View Medical Degree</a>
        <a href="http://localhost:5000/uploads/doctor-verification/medicalLicense-1756378370185-588493699.png" 
           target="_blank" class="button direct">View Medical License</a>
    </div>

    <div class="test-section">
        <h2>‚¨áÔ∏è Download Options</h2>
        <p>Download the image through different methods:</p>
        <a href="http://localhost:5000/api/doctor-verification/documents/68b033affc44860bc34675ae/68b03502fd5874f0f105cb39/download" 
           class="button download">Download via API</a>
        <a href="http://localhost:5000/uploads/doctor-verification/governmentId-1756378370156-589381697.png" 
           download class="button download">Download Direct</a>
    </div>

    <div class="test-section">
        <h2>üîß Troubleshooting</h2>
        <p>If images are still blurry, the issue might be:</p>
        <ul>
            <li><strong>Original Image Quality:</strong> The uploaded screenshot might be low resolution</li>
            <li><strong>Browser Rendering:</strong> Some browsers apply compression to large images</li>
            <li><strong>File Format:</strong> PNG files can sometimes have compression artifacts</li>
            <li><strong>Image Source:</strong> Screenshots often have lower quality than original documents</li>
        </ul>
        
        <h3>üí° Recommendations:</h3>
        <ul>
            <li>Try viewing the image in a new tab for full resolution</li>
            <li>Use the "DIR" button to access the file directly</li>
            <li>Download the file and view it in a local image viewer</li>
            <li>Check if the original uploaded file has better quality</li>
        </ul>
    </div>

    <script>
        // Add some interactivity
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîç Image Quality Test Loaded');
            console.log('üìä Testing image loading and quality...');
            
            // Check if all images loaded successfully
            const images = document.querySelectorAll('img');
            images.forEach((img, index) => {
                img.addEventListener('load', () => {
                    console.log(`‚úÖ Image ${index + 1} loaded successfully`);
                });
                img.addEventListener('error', () => {
                    console.log(`‚ùå Image ${index + 1} failed to load`);
                });
            });
        });
    </script>
</body>
</html>
